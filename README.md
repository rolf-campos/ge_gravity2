# ge_gravity2
A Stata command to solve universal gravity models
### The command
`ge_gravity2` is a Stata command that solves and simulates a gravity model with a positive supply elasticity and, more generally, economic geography models in the class of universal gravity models defined in the article by Allen, Arkolakis and Takahashi, 2020, ["Universal Gravity,"](https://doi.org/10.1086/704385) *Journal of Political Economy*, 128(2), 2020, 393--433 [(ungated link)](https://arkolakis.com/wp-content/uploads/research/UniversalGravity/AAT-Universal-Gravity-paper.pdf).

The latest version of the command can be installed directly from within Stata:
```
ssc install ge_gravity2, replace
```

To take a look at the command's help file, type:
```
help ge_gravity2
```

### Example of its usage
We want to obtain the general equilibrium effect of the North American Free Trade Agreement (NAFTA). Suppose that we know the partial equilibrium effect of the trade agreement to be 0.5. We want to obtain the impact of this agreement in general equilibrium according to a model in the universal gravity class, assuming a trade elasticity of 5.03 and a supply elasticity of 1.24. We can do this with the following code:
```
clear all
** Load example data
use https://github.com/rolf-campos/ge_gravity2/raw/main/examples/ge_gravity2_example_data.dta
describe

** Generate an indicator of NAFTA
gen nafta = 0
replace nafta = 1 if iso_o == "CAN" & (iso_d == "MEX" | iso_d == "USA")
replace nafta = 1 if iso_o == "MEX" & (iso_d == "CAN" | iso_d == "USA")
replace nafta = 1 if iso_o == "USA" & (iso_d == "CAN" | iso_d == "MEX")

** Generate the partial equilibrium effect of NAFTA
local beta = 0.500
gen partial_effect = `beta' * nafta

** Obtain general equilibrium effects of NAFTA and report a table with results.
** We use a trade elasticity of 5.03 and a supply elasticity of 1.24.
ge_gravity2 iso_o iso_d flow partial_effect if year==1990, theta(5.03) psi(1.24) results
```

To see all output that was generated by the command run
```
ereturn list
```
